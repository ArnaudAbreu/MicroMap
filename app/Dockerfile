FROM node:10.24.0-alpine
RUN mkdir /app
WORKDIR /app
COPY ["package.json", "package-lock.json*", "./"]
ARG REACT_APP_FLASK_SERVER_PORT
ENV REACT_APP_FLASK_SERVER_PORT=$REACT_APP_FLASK_SERVER_PORT
ARG REACT_APP_FLASK_SERVER_IP
ENV REACT_APP_FLASK_SERVER_IP=$REACT_APP_FLASK_SERVER_IP
# RUN rm .env
RUN echo "REACT_APP_FLASK_SERVER_IP=${REACT_APP_FLASK_SERVER_IP}" >> .env
RUN echo "REACT_APP_FLASK_SERVER_PORT=${REACT_APP_FLASK_SERVER_PORT}" >> .env
RUN head .env
RUN npm install
COPY . .
